offense_team:
  type: embedding

defense_team:
  type: embedding

offense_roster:
  type: embedding_list
  len: 5

defense_roster:
  type: embedding_list
  len: 5

is_second_chance:
  type: bool

initial_event:
  type: choice
  choices: [shot, turnover, foul_over_limit]

shooter:
  type: choice
  choices: offense_roster
  triggers: 
    - initial_event: shot

shot_made:
  type: bool
  triggers: 
    - initial_event: shot
  
3_point_shot:
  type: bool
  triggers:
    - initial_event: shot

2_point_shot_distance:
  type: scalar
  triggers:
    - 3_point_shot: false

3_point_shot_distance:
  type: scalar
  triggers:
    - 3_point_shot: true

shot_fouled:
  type: bool
  triggers:
    - initial_event: shot 

shooting_fouler:
  type: player_choice
  choices: defense_roster
  triggers: 
    - shot_fouled: true

blocker: 
  type: choice
  choices: [offense_roster, null]
  triggers: 
    - shot_made: false  

turnoverer:
  type: choice
  choices: offense_roster
  triggers: 
    - initial_event: turnover

offensive_foul:
  type: bool
  triggers:
    - initial_event: turnover

offensive_fouler:
  type: choice
  choices: offense_roster
  triggers:
    - offensive_foul: true

offensive_foul_drawer:
  type: choice
  choices: defense_roster
  triggers:
    - offensive_foul: true

stealer:
  type: choice
  choices: [offense_roster, null]
  triggers: 
    - initial_event: turnover

over_limit_fouler:
  type: choice
  choices: defense_roster
  triggers:
    - initial_event: foul_over_limit

over_limit_foul_drawer:
  type: choice
  choices: offense_roster
  triggers:
    - initial_event: foul_over_limit

first_free_throw_made:
  type: bool
  triggers:
    - initial_event: foul_over_limit
    - shot_fouled: true
      shot_made: false

middle_free_throw_made:
  type: bool
  weight_share: first_free_throw_made
  triggers:
    - shot_fouled: true
      3_point_shot: true
      shot_made: false

last_free_throw_made:
  type: bool
  weight_share: first_free_throw_made
  triggers:
    - initial_event: foul_over_limit
    - shot_fouled: true

rebound_type:
  type: choice
  choices: [offensive, defensive, null]
  triggers:
    - shot_made: false
    - last_free_throw_made: false

offensive_rebounder:
  type: choice
  choices: offense_roster
  triggers:
    - rebound_type: offensive

defensive_rebounder:
  type: choice
  choices: defense_roster
  triggers:
    - rebound_type: defensive
